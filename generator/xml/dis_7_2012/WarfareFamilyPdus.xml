<classes>
    <class name="WarfareFamilyPdu" inheritsFrom="PduBase" abstract="true"
           comment="Abstract superclass for fire and detonation pdus that have shared information. Section 7.3">

        <initialValue name="protocolFamily" value="DISProtocolFamily.WARFARE"/>

    </class>

    <class name="FirePdu" inheritsFrom="WarfareFamilyPdu" comment="7.3.2 Used to communicate the firing of a weapon or expendable.">

        <initialValue name="pduType" value="DISPDUType.FIRE"/>

        <attribute name="firingEntityID" comment="ID of the entity that shot">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="targetEntityID" comment="ID of the entity that is being shot at">
            <classRef name="EntityID"/>
        </attribute>
        
        <attribute name="munitionExpendibleID" comment="This field shall specify the entity identification of the fired munition or expendable. This field shall be represented by an Entity Identifier record (see 6.2.28).">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="eventID" comment="This field shall contain an identification generated by the firing entity to associate related firing and detonation events. This field shall be represented by an Event Identifier record (see 6.2.34).">
            <classRef name="EventIdentifier"/>
        </attribute>

        <attribute name="fireMissionIndex" comment="This field shall identify the fire mission (see 5.4.3.3). This field shall be represented by a 32-bit unsigned integer.">
            <primitive type="uint32"/>
        </attribute>

        <attribute name="locationInWorldCoordinates" comment="This field shall specify the location, in world coordinates, from which the munition was launched, and shall be represented by a World Coordinates record (see 6.2.97).">
            <classRef name="Vector3Double"/>
        </attribute>

        <attribute name="descriptor" comment="This field shall describe the firing or launch of a munition or expendable represented by one of the following types of Descriptor records: Munition Descriptor (6.2.20.2) or Expendable Descriptor (6.2.20.4).">
            <classRef name="MunitionDescriptor"/>
        </attribute>

        <attribute name="velocity" comment="This field shall specify the velocity of the fired munition at the point when the issuing simulation application intends the externally visible effects of the launch (e.g. exhaust plume or muzzle blast) to first become apparent. The velocity shall be represented in world coordinates. This field shall be represented by a Linear Velocity Vector record [see 6.2.95 item c)].">
            <classRef name="Vector3Float"/>
        </attribute>

        <attribute name="range" comment="This field shall specify the range that an entity's fire control system has assumed in computing the fire control solution. This field shall be represented by a 32-bit floating point number in meters. For systems where range is unknown or unavailable, this field shall contain a value of zero.">
            <primitive type="float32"/>
        </attribute>

    </class>

    <class name="DetonationPdu" inheritsFrom="WarfareFamilyPdu"
           comment="7.3.3 Used to communicate the detonation or impact of munitions, as well as non-munition explosions, the burst or initial bloom of chaff, and the ignition of a flare.">

        <initialValue name="pduType" value="DISPDUType.DETONATION"/>

        <attribute name="sourceEntityID" comment="ID of the entity that shot">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="targetEntityID" comment="ID of the entity that is being shot at">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="explodingEntityID" comment="ID of the expendable entity, Section 7.3.3 ">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="eventID" comment="ID of event, Section 7.3.3">
            <classRef name="EventIdentifier"/>
        </attribute>

        <attribute name="velocity" comment= "velocity of the munition immediately before detonation/impact, Section 7.3.3 ">
            <classRef name="Vector3Float"/>
        </attribute>

        <attribute name="locationInWorldCoordinates" comment="location of the munition detonation, the expendable detonation, Section 7.3.3 ">
            <classRef name="Vector3Double"/>
        </attribute>

        <attribute name="descriptor" comment="Describes the detonation represented, Section 7.3.3 ">
            <classRef name="MunitionDescriptor"/>
        </attribute>

        <attribute name="locationOfEntityCoordinates" comment="Velocity of the ammunition, Section 7.3.3 ">
            <classRef name="Vector3Float"/>
        </attribute>

        <attribute name="detonationResult" comment="result of the detonation, Section 7.3.3 ">
            <sisoenum type="DetonationResult" comment="uid 62"/>
        </attribute>

        <attribute name="numberOfVariableParameters" hidden="true" comment="How many articulation parameters we have, Section 7.3.3 ">
            <primitive type="uint8"/>
        </attribute>

        <attribute name="pad" comment="padding">
            <primitive type="uint16"/>
        </attribute>

        <attribute name="variableParameters" comment="specify the parameter values for each Variable Parameter record, Section 7.3.3 ">
            <objectlist countFieldName="numberOfVariableParameters">
                <classRef name="VariableParameter"/>
            </objectlist>
        </attribute>

    </class>

    <class name="DirectedEnergyFirePdu" inheritsFrom="WarfareFamilyPdu"
           comment="7.3.4 Used to communicate the firing of a directed energy weapon.">

        <initialValue name="pduType" value="DISPDUType.DIRECTED_ENERGY_FIRE"/>

        <attribute name="firingEntityID" comment="ID of the entity that shot">
            <classRef name="EntityID"/>
        </attribute>

        <attribute name="eventID">
            <classRef name="EventIdentifier"/>
        </attribute>

        <attribute name="munitionType" comment="Field shall identify the munition type enumeration for the DE weapon beam, Section 7.3.4 ">
            <classRef name="EntityType"/>
        </attribute>

        <attribute name="shotStartTime" comment="Field shall indicate the simulation time at start of the shot, Section 7.3.4 ">
            <classRef name="ClockTime"/>
        </attribute>

        <attribute name="commulativeShotTime" comment= "Field shall indicate the current cumulative duration of the shot, Section 7.3.4 ">
            <primitive type="float32"/>
        </attribute>

        <attribute name="apertureEmitterLocation" comment="Field shall identify the location of the DE weapon aperture/emitter, Section 7.3.4 ">
            <classRef name="Vector3Float"/>
        </attribute>

        <attribute name="apertureDiameter" comment="Field shall identify the beam diameter at the aperture/emitter, Section 7.3.4 ">
            <primitive type="float32"/>
        </attribute>

        <attribute name="wavelength" comment="Field shall identify the emissions wavelength in units of meters, Section 7.3.4 ">
            <primitive type="float32"/>
        </attribute>
        
        <attribute name="pad1">
            <primitive type="uint32"/>
        </attribute>
        
        <attribute name="pulseRepititionFrequency" >
            <primitive type="float32"/>
        </attribute>

        <attribute name="pulseWidth" comment="field shall identify the pulse width emissions in units of seconds, Section 7.3.4">
            <primitive type="float32"/>
        </attribute>

        <attribute name="flags" comment="16bit Boolean field shall contain various flags to indicate status information needed to process a DE, Section 7.3.4 ">
            <sisobitfield type="DEFireFlags" comment="uid 313"/>
        </attribute>

        <attribute name="pulseShape" comment="Field shall identify the pulse shape and shall be represented as an 8-bit enumeration, Section 7.3.4 ">
            <sisoenum type="DEFirePulseShape" comment="uid 312"/>
        </attribute>

        <attribute name="pad2">
            <primitive type="uint8"/>
        </attribute>

        <attribute name="pad3">
            <primitive type="uint32"/>
        </attribute>

        <attribute name="pad4">
            <primitive type="uint16"/>
        </attribute>

        <attribute name="numberOfDERecords" hidden="true" comment="Field shall specify the number of DE records, Section 7.3.4 ">
            <primitive type="uint16"/>
        </attribute>

        <attribute name="dERecords" comment="Fields shall contain one or more DE records, records shall conform to the variable record format (Section6.2.82), Section 7.3.4">
            <objectlist countFieldName="numberOfDERecords">
                <classRef name="StandardVariableSpecification"/>
            </objectlist>
        </attribute>
    </class>

    <class name="EntityDamageStatusPdu" inheritsFrom="WarfareFamilyPdu"
           comment="7.3.5 Used to communicate detailed damage information sustained by an entity regardless of the source of the damage.">
                
        <initialValue name="pduType" value="DISPDUType.ENTITY_DAMAGE_STATUS"/>

        <attribute name="damagedEntityID" comment="Field shall identify the damaged entity (see 6.2.28), Section 7.3.4">
            <classref name="EntityID"/>
        </attribute>

        <attribute name="padding1">
            <primitive type="uint16" defaultValue="0"/>
        </attribute>

        <attribute name="padding2">
            <primitive type="uint16" defaultValue="0"/>
        </attribute>

        <attribute name="numberOfDamageDescription" hidden="true" comment="field shall specify the number of Damage Description records, Section 7.3.5">
            <primitive type="uint16" defaultValue="0"/>
        </attribute>
   
        <attribute name="damageDescriptionRecords"
                   comment="Fields shall contain one or more Damage Description records (see 6.2.17) and may contain other Standard Variable records, Section 7.3.5">
            <objectlist countFieldName="numberOfDamageDescription"> 
                <classRef name="DirectedEnergyDamage"/>
            </objectlist>
        </attribute>

    </class>

</classes>